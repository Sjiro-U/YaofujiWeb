(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},45185,e=>{"use strict";let t=[{id:"tomato",name:"トマト",color:"#E53935"},{id:"eggplant",name:"ナス",color:"#5E35B1"},{id:"cucumber",name:"きゅうり",color:"#43A047"},{id:"carrot",name:"にんじん",color:"#FB8C00"},{id:"daikon",name:"大根",color:"#FAFAFA"},{id:"spinach",name:"ほうれん草",color:"#2E7D32"},{id:"cabbage",name:"キャベツ",color:"#81C784"},{id:"potato",name:"じゃがいも",color:"#795548"},{id:"onion",name:"たまねぎ",color:"#FFCC80"},{id:"pepper",name:"ピーマン",color:"#66BB6A"}],a="yaofuji_farm_data",l="yaofuji_farm_data_field_yu";function s(e){localStorage.setItem(a,JSON.stringify(e))}function o(e){localStorage.setItem(l,JSON.stringify(e))}function d(){{let e=localStorage.getItem(a);if(e)try{return JSON.parse(e)}catch{}}let e=[];for(let t=0;t<6;t++)for(let a=0;a<9;a++)e.push({id:`${t}-${a}`,row:t,col:a,crop:null,status:"empty"});return e[0].crop=t[0],e[0].status="harvest",e[0].plantedDate="2025-09-15",e[1].crop=t[1],e[1].status="planted",e[1].plantedDate="2025-10-01",e[9].crop=t[5],e[9].status="planted",e[9].plantedDate="2025-12-20",{name:"SFC近隣農地",rows:6,cols:9,plots:e,logs:[{id:"1",plotId:"0-0",date:"2026-01-07",type:"watering",notes:"朝に水やり実施"},{id:"2",plotId:"0-1",date:"2026-01-05",type:"fertilizing",notes:"追肥（有機肥料）実施"}],direction:"north"}}function r(){{let e=localStorage.getItem(l);if(e)try{return JSON.parse(e)}catch{}}let e=[];for(let t=0;t<3;t++)for(let a=0;a<9;a++)e.push({id:`yu-${t}-${a}`,row:t,col:a,crop:null,status:"empty"});return e[0].crop=t[3],e[0].status="planted",e[0].plantedDate="2025-11-01",e[9].crop=t[5],e[9].status="planted",e[9].plantedDate="2025-11-01",e[3].crop=t[4],e[3].status="harvest",e[3].plantedDate="2025-10-15",e[3].isMergeStart=!0,e[3].mergeCount=3,e[12].mergedWith="yu-0-3",e[21].mergedWith="yu-0-3",e[14].crop=t[6],e[14].status="planted",e[14].plantedDate="2025-10-20",{name:"フィールドゆう",rows:3,cols:9,plots:e,logs:[],direction:"north"}}function i(e){let t=new Date(e);return Math.floor((new Date().getTime()-t.getTime())/864e5)}let n="yaofuji_custom_crops";function c(e){localStorage.setItem(n,JSON.stringify(e))}function p(){{let e=localStorage.getItem(n);if(e)try{return JSON.parse(e)}catch{}}return[]}function u(){return[...t,...p()]}e.s(["AVAILABLE_CROPS",0,t,"DIRECTION_LABELS",0,{north:"北",east:"東",south:"南",west:"西"},"LOG_TYPE_LABELS",0,{watering:"水やり",thinning:"間引き",fertilizing:"追肥・土壌",pesticide:"防除・除草",other:"その他"},"SAKATA_LINKS",0,{tomato:"https://sakata-tsushin.com/lesson-vegetable/detail_1/",eggplant:"https://sakata-tsushin.com/lesson-vegetable/detail_2/",cucumber:"https://sakata-tsushin.com/lesson-vegetable/detail_3/",carrot:"https://sakata-tsushin.com/lesson-vegetable/detail_20/",daikon:"https://sakata-tsushin.com/lesson-vegetable/detail_8/",spinach:"https://sakata-tsushin.com/lesson-vegetable/detail_14/",cabbage:"https://sakata-tsushin.com/lesson-vegetable/detail_7/",potato:"https://sakata-tsushin.com/lesson-vegetable/detail_11/",onion:"https://sakata-tsushin.com/lesson-vegetable/detail_16/",pepper:"https://sakata-tsushin.com/lesson-vegetable/detail_4/"},"STATUS_COLORS",0,{planted:"var(--status-planted)",harvest:"var(--status-harvest)",empty:"var(--status-empty)"},"STATUS_LABELS",0,{planted:"定植済み",harvest:"収穫期",empty:"空き"},"daysSince",()=>i,"getAllCrops",()=>u,"loadCustomCrops",()=>p,"loadFarmData",()=>d,"loadFieldYuFarmData",()=>r,"saveCustomCrops",()=>c,"saveFarmData",()=>s,"saveFieldYuFarmData",()=>o])},43531,39544,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],43531);let l=(0,t.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);e.s(["Droplets",()=>l],39544)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},41467,e=>{e.v({activeTab:"page-module__Kp-yoq__activeTab",addCropBtn:"page-module__Kp-yoq__addCropBtn",backLink:"page-module__Kp-yoq__backLink",btn:"page-module__Kp-yoq__btn",buttonGroup:"page-module__Kp-yoq__buttonGroup",closeBtn:"page-module__Kp-yoq__closeBtn",colorPicker:"page-module__Kp-yoq__colorPicker",compassN:"page-module__Kp-yoq__compassN",compassNeedle:"page-module__Kp-yoq__compassNeedle",compassRose:"page-module__Kp-yoq__compassRose",compassSelector:"page-module__Kp-yoq__compassSelector",container:"page-module__Kp-yoq__container",content:"page-module__Kp-yoq__content",cropBadge:"page-module__Kp-yoq__cropBadge",cropDot:"page-module__Kp-yoq__cropDot",cropSelectRow:"page-module__Kp-yoq__cropSelectRow",cropsListDisplay:"page-module__Kp-yoq__cropsListDisplay",deleteCropBtn:"page-module__Kp-yoq__deleteCropBtn",detailPanel:"page-module__Kp-yoq__detailPanel",directionSelect:"page-module__Kp-yoq__directionSelect",directionSelector:"page-module__Kp-yoq__directionSelector",editActions:"page-module__Kp-yoq__editActions",editForm:"page-module__Kp-yoq__editForm",emptyPanel:"page-module__Kp-yoq__emptyPanel",farmGrid:"page-module__Kp-yoq__farmGrid",farmName:"page-module__Kp-yoq__farmName",farmTab:"page-module__Kp-yoq__farmTab",farmTabs:"page-module__Kp-yoq__farmTabs",fieldYuGrid:"page-module__Kp-yoq__fieldYuGrid",fieldYuPlot:"page-module__Kp-yoq__fieldYuPlot",header:"page-module__Kp-yoq__header",infoLabel:"page-module__Kp-yoq__infoLabel",infoRow:"page-module__Kp-yoq__infoRow",infoValue:"page-module__Kp-yoq__infoValue",legend:"page-module__Kp-yoq__legend",legendDot:"page-module__Kp-yoq__legendDot",legendItem:"page-module__Kp-yoq__legendItem",mapHeader:"page-module__Kp-yoq__mapHeader",mapSection:"page-module__Kp-yoq__mapSection",mergeControls:"page-module__Kp-yoq__mergeControls",mergeIndicator:"page-module__Kp-yoq__mergeIndicator",mergeSelected:"page-module__Kp-yoq__mergeSelected",mergeStart:"page-module__Kp-yoq__mergeStart",mergedChild:"page-module__Kp-yoq__mergedChild",mergedPlot:"page-module__Kp-yoq__mergedPlot",modal:"page-module__Kp-yoq__modal",modalBody:"page-module__Kp-yoq__modalBody",modalContent:"page-module__Kp-yoq__modalContent",modalFooter:"page-module__Kp-yoq__modalFooter",modalHeader:"page-module__Kp-yoq__modalHeader",multiCropDisplay:"page-module__Kp-yoq__multiCropDisplay",page:"page-module__Kp-yoq__page",panelHeader:"page-module__Kp-yoq__panelHeader",plotCell:"page-module__Kp-yoq__plotCell",plotCrop:"page-module__Kp-yoq__plotCrop",plotInfo:"page-module__Kp-yoq__plotInfo",plotStatus:"page-module__Kp-yoq__plotStatus",ridgeLabels:"page-module__Kp-yoq__ridgeLabels",rowLabels:"page-module__Kp-yoq__rowLabels",selected:"page-module__Kp-yoq__selected",statusBadge:"page-module__Kp-yoq__statusBadge"})},37380,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(18566),s=e.i(22016),o=e.i(52998),d=e.i(45185),r=e.i(71689),i=e.i(37727),n=e.i(43531),c=e.i(39544),p=e.i(87316),u=e.i(7233),m=e.i(75254);let _=(0,m.default)("merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),g=(0,m.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var h=e.i(41467);function f(){var e;let m,f,{isLoggedIn:y}=(0,o.useAuth)(),b=(0,l.useRouter)(),[v,x]=(0,a.useState)("sfc"),[j,S]=(0,a.useState)(null),[C,N]=(0,a.useState)(null),[k,K]=(0,a.useState)(null),[q,w]=(0,a.useState)(!1),[D,L]=(0,a.useState)(""),[T,A]=(0,a.useState)("empty"),[F,B]=(0,a.useState)(""),[R,M]=(0,a.useState)([]),[O,I]=(0,a.useState)(!1),[W,z]=(0,a.useState)(""),[P,$]=(0,a.useState)("#4CAF50"),[Y,E]=(0,a.useState)(!1),[U,H]=(0,a.useState)(new Set),[G,V]=(0,a.useState)(!1),[J,X]=(0,a.useState)(new Set),Q="sfc"===v?j:C,Z="sfc"===v?S:N;if((0,a.useEffect)(()=>{y?(S((0,d.loadFarmData)()),N((0,d.loadFieldYuFarmData)()),M((0,d.getAllCrops)())):b.push("/login")},[y,b]),!y||!Q)return null;let ee=e=>{K(e),L(e.crop?.id||""),A(e.status),B(e.crop?.variety||""),w(!1)},et=(e,t)=>{if(!Q)return!1;let a=e.row,l=e.col;"top"===t&&a--,"bottom"===t&&a++,"left"===t&&l--,"right"===t&&l++;let s=Q.plots.find(e=>e.row===a&&e.col===l);if(!s)return!1;if((e.isMergeStart||e.mergedWith)&&(e.isMergeStart?e.id:e.mergedWith)===(s.isMergeStart?s.id:s.mergedWith))return!0;return!!(Y&&U.has(e.id)&&U.has(s.id))};return(0,t.jsxs)("div",{className:h.default.page,children:[(0,t.jsxs)("div",{className:h.default.container,children:[(0,t.jsxs)("div",{className:h.default.header,children:[(0,t.jsxs)(s.default,{href:"/dashboard",className:h.default.backLink,children:[(0,t.jsx)(r.ArrowLeft,{size:18}),"ダッシュボードへ"]}),(0,t.jsx)("h1",{children:"農地管理"}),(0,t.jsxs)("div",{className:h.default.farmTabs,children:[(0,t.jsx)("button",{className:`${h.default.farmTab} ${"sfc"===v?h.default.activeTab:""}`,onClick:()=>{x("sfc"),K(null)},children:"SFC近隣農地"}),(0,t.jsx)("button",{className:`${h.default.farmTab} ${"fieldYu"===v?h.default.activeTab:""}`,onClick:()=>{x("fieldYu"),K(null)},children:"フィールドゆう"})]})]}),(0,t.jsxs)("div",{className:h.default.content,children:[(0,t.jsxs)("div",{className:h.default.mapSection,children:[(0,t.jsxs)("div",{className:h.default.mapHeader,children:[(0,t.jsx)("span",{children:Y?"マージする区画をクリックして選択":G?"リセットする区画をクリックして選択":"クリックして区画を選択"}),(0,t.jsxs)("div",{className:h.default.compassSelector,children:[(0,t.jsxs)("div",{className:h.default.compassRose,style:{transform:`rotate(${"north"===Q.direction?0:"east"===Q.direction?90:"south"===Q.direction?180:"west"===Q.direction?-90:0}deg)`},children:[(0,t.jsx)("div",{className:h.default.compassNeedle}),(0,t.jsx)("span",{className:h.default.compassN,children:"N"})]}),(0,t.jsx)("select",{value:Q.direction||"north",onChange:e=>(e=>{if(!Q)return;let t={...Q,direction:e};Z(t),"sfc"===v?(0,d.saveFarmData)(t):(0,d.saveFieldYuFarmData)(t)})(e.target.value),className:h.default.directionSelect,children:Object.entries(d.DIRECTION_LABELS).map(([e,a])=>(0,t.jsxs)("option",{value:e,children:[a,"向き"]},e))})]}),(0,t.jsx)("div",{className:h.default.mergeControls,children:Y||G?Y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"btn btn-accent",onClick:()=>{if(!Q||U.size<2)return;let e=Array.from(U),t=e.map(e=>Q.plots.find(t=>t.id===e)).filter(e=>void 0!==e).sort((e,t)=>e.col!==t.col?e.col-t.col:e.row-t.row);if(t.length<2)return;let a=new Set(e),l=t[0],s=new Set,o=[l],r=[];for(;o.length>0;){let e=o.shift();if(!s.has(e.id))for(let t of(s.add(e.id),r.push(e),[Q.plots.find(t=>t.row===e.row-1&&t.col===e.col),Q.plots.find(t=>t.row===e.row+1&&t.col===e.col),Q.plots.find(t=>t.row===e.row&&t.col===e.col-1),Q.plots.find(t=>t.row===e.row&&t.col===e.col+1)]))t&&a.has(t.id)&&!s.has(t.id)&&o.push(t)}if(r.length<2)return void alert("隣り合う区画を2つ以上選択してください");let i=r[0].id,n=r.map(e=>e.id),c=Q.plots.map(e=>e.id===i?{...e,isMergeStart:!0,mergeCount:r.length,status:"empty",crop:null,plantedDate:void 0}:n.includes(e.id)&&e.id!==i?{...e,mergedWith:i,status:"empty",crop:null,plantedDate:void 0}:e),p={...Q,plots:c};Z(p),"sfc"===v?(0,d.saveFarmData)(p):(0,d.saveFieldYuFarmData)(p),H(new Set),E(!1)},disabled:U.size<2,children:["マージ実行 (",U.size,"個選択)"]}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>{E(!1),H(new Set)},children:"キャンセル"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"btn btn-accent",onClick:()=>{if(!Q||J.size<1)return;let e=Array.from(J),t=Q.plots.map(t=>e.includes(t.id)?{...t,crop:null,status:"empty",plantedDate:void 0,isMergeStart:!1,mergeCount:void 0,mergedWith:void 0}:t.mergedWith&&e.includes(t.mergedWith)?{...t,mergedWith:void 0}:t),a={...Q,plots:t};Z(a),"sfc"===v?(0,d.saveFarmData)(a):(0,d.saveFieldYuFarmData)(a),X(new Set),V(!1)},disabled:J.size<1,children:["リセット実行 (",J.size,"個選択)"]}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>{V(!1),X(new Set)},children:"キャンセル"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"btn btn-secondary",onClick:()=>{E(!0),H(new Set)},children:[(0,t.jsx)(_,{size:16}),"マージ"]}),(0,t.jsxs)("button",{className:"btn btn-secondary",onClick:()=>{V(!0),X(new Set)},children:[(0,t.jsx)(g,{size:16}),"リセット"]})]})}),(0,t.jsx)("div",{className:h.default.legend,children:Object.entries(d.STATUS_LABELS).map(([e,a])=>(0,t.jsxs)("div",{className:h.default.legendItem,children:[(0,t.jsx)("span",{className:h.default.legendDot,style:{background:d.STATUS_COLORS[e]}}),a]},e))})]}),(0,t.jsx)("div",{className:h.default.farmGrid,style:{gridTemplateColumns:`repeat(${Q.cols}, 1fr)`,gridTemplateRows:`repeat(${Q.rows}, 1fr)`,gap:0},children:Q.plots.map((e,a)=>{let l=e.crop?.color,s=e.isMergeStart&&e.mergeCount&&e.mergeCount>1,o=!!e.mergedWith,r=U.has(e.id),i=J.has(e.id),n=e.isMergeStart?e.id:e.mergedWith,c=k?.isMergeStart?k.id:k?.mergedWith,p=et(e,"top"),u=et(e,"bottom"),m=et(e,"left"),_=et(e,"right"),g=k?.id===e.id||n&&c&&n===c,f="var(--color-primary)",y=d.STATUS_COLORS[e.status];return(0,t.jsxs)("button",{className:`${h.default.plotCell} ${h.default.fieldYuPlot} ${r?h.default.mergeSelected:""}`,style:{background:r?"rgba(76, 175, 80, 0.3)":i?"rgba(244, 67, 54, 0.3)":l?`linear-gradient(135deg, ${l}40, ${l}20)`:o&&Q.plots.find(t=>t.id===e.mergedWith)?.crop?.color?`linear-gradient(135deg, ${Q.plots.find(t=>t.id===e.mergedWith)?.crop?.color}40, ${Q.plots.find(t=>t.id===e.mergedWith)?.crop?.color}20)`:void 0,borderTopColor:p?"transparent":g?f:y,borderBottomColor:u?"transparent":g?f:y,borderLeftColor:m?"transparent":g?f:y,borderRightColor:_?"transparent":g?f:y,borderTopWidth:3*!p,borderBottomWidth:3*!u,borderLeftWidth:3*!m,borderRightWidth:3*!_,borderTopLeftRadius:p||m?0:void 0,borderTopRightRadius:p||_?0:void 0,borderBottomLeftRadius:u||m?0:void 0,borderBottomRightRadius:u||_?0:void 0},onClick:()=>{var t,a;if(Y){let a;t=e.id,(a=new Set(U)).has(t)?a.delete(t):a.add(t),H(a)}else if(G){let t;a=e.id,(t=new Set(J)).has(a)?t.delete(a):t.add(a),X(t)}else{if(o){let t=Q.plots.find(t=>t.id===e.mergedWith);if(t)return void ee(t)}ee(e)}},children:[(!(s||o)||!p&&!_)&&(0,t.jsx)("span",{className:h.default.plotStatus,style:{background:d.STATUS_COLORS[e.status]}}),e.crop&&!o&&(0,t.jsxs)("span",{className:h.default.plotCrop,children:[e.crop.name,e.crop.variety&&(0,t.jsxs)("small",{children:["(",e.crop.variety,")"]})]}),(r||i)&&(0,t.jsx)("span",{className:h.default.mergeIndicator,children:"✓"})]},e.id)})}),"fieldYu"===v&&(0,t.jsx)("div",{className:h.default.ridgeLabels,children:Array.from({length:Q.cols},(e,a)=>(0,t.jsxs)("span",{children:["畝",a+1]},a))})]}),(0,t.jsx)("div",{className:h.default.detailPanel,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:h.default.panelHeader,children:[(0,t.jsxs)("h2",{children:["区画 ",k.row+1,"-",k.col+1]}),(0,t.jsx)("button",{onClick:()=>K(null),className:h.default.closeBtn,children:(0,t.jsx)(i.X,{size:18})})]}),q?(0,t.jsxs)("div",{className:h.default.editForm,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"作物"}),(0,t.jsxs)("div",{className:h.default.cropSelectRow,children:[(0,t.jsxs)("select",{className:"form-input",value:D,onChange:e=>L(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"（なし）"}),R.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name,e.isCustom?" ★":""]},e.id))]}),(0,t.jsx)("button",{type:"button",className:h.default.addCropBtn,onClick:()=>I(!0),title:"新しい作物を追加",children:(0,t.jsx)(u.Plus,{size:16})}),D&&R.find(e=>e.id===D)?.isCustom&&(0,t.jsx)("button",{type:"button",className:h.default.deleteCropBtn,onClick:()=>(e=>{if(!confirm("この作物を削除しますか？"))return;let t=(0,d.loadCustomCrops)().filter(t=>t.id!==e);(0,d.saveCustomCrops)(t),M((0,d.getAllCrops)()),D===e&&L("")})(D),title:"この作物を削除",children:(0,t.jsx)(i.X,{size:16})})]})]}),D&&(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"品種（任意）"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:F,onChange:e=>B(e.target.value),placeholder:"例：桃太郎、アイコ"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"ステータス"}),(0,t.jsx)("select",{className:"form-input",value:T,onChange:e=>A(e.target.value),children:Object.entries(d.STATUS_LABELS).map(([e,a])=>(0,t.jsx)("option",{value:e,children:a},e))})]}),(0,t.jsxs)("div",{className:h.default.editActions,children:[(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>{if(!k||!Q)return;let e=R.find(e=>e.id===D)||null,t=e?{...e,variety:F||void 0}:null,a=k.isMergeStart?Q.plots.filter(e=>e.mergedWith===k.id).map(e=>e.id):[],l=Q.plots.map(e=>e.id===k.id?{...e,crop:t,status:T,plantedDate:t&&!e.plantedDate?new Date().toISOString().split("T")[0]:e.plantedDate}:a.includes(e.id)?{...e,status:T}:e),s={...Q,plots:l};Z(s),"sfc"===v?(0,d.saveFarmData)(s):(0,d.saveFieldYuFarmData)(s),K(l.find(e=>e.id===k.id)||null),w(!1)},children:[(0,t.jsx)(n.Check,{size:16}),"保存"]}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>w(!1),children:"キャンセル"})]})]}):(0,t.jsxs)("div",{className:h.default.plotInfo,children:[(0,t.jsxs)("div",{className:h.default.infoRow,children:[(0,t.jsx)("span",{className:h.default.infoLabel,children:"作物"}),(0,t.jsx)("span",{className:h.default.infoValue,children:k.crop?(0,t.jsxs)("span",{className:h.default.cropBadge,style:{background:k.crop.color},children:[k.crop.name,k.crop.variety&&` (${k.crop.variety})`]}):"未設定"})]}),(0,t.jsxs)("div",{className:h.default.infoRow,children:[(0,t.jsx)("span",{className:h.default.infoLabel,children:"ステータス"}),(0,t.jsx)("span",{className:h.default.statusBadge,style:{background:d.STATUS_COLORS[k.status]},children:d.STATUS_LABELS[k.status]})]}),k.isMergeStart&&k.mergeCount&&k.mergeCount>1&&(0,t.jsxs)("div",{className:h.default.infoRow,children:[(0,t.jsx)("span",{className:h.default.infoLabel,children:"マージ"}),(0,t.jsxs)("span",{className:h.default.infoValue,children:[k.mergeCount,"区画を結合中"]})]}),k.plantedDate&&(0,t.jsxs)("div",{className:h.default.infoRow,children:[(0,t.jsxs)("span",{className:h.default.infoLabel,children:[(0,t.jsx)(p.Calendar,{size:14}),"植付日"]}),(0,t.jsxs)("span",{className:h.default.infoValue,children:[k.plantedDate,(0,t.jsxs)("small",{children:["（",(0,d.daysSince)(k.plantedDate),"日前）"]})]})]}),(e=k.id,m=Q.logs.filter(t=>t.plotId===e&&"watering"===t.type).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),(f=m[0]?.date||null)?(0,t.jsxs)("div",{className:h.default.infoRow,children:[(0,t.jsxs)("span",{className:h.default.infoLabel,children:[(0,t.jsx)(c.Droplets,{size:14}),"最終水やり"]}),(0,t.jsxs)("span",{className:h.default.infoValue,children:[(0,d.daysSince)(f),"日前"]})]}):null),(0,t.jsxs)("div",{className:h.default.buttonGroup,children:[(0,t.jsx)("button",{className:"btn btn-accent",onClick:()=>w(!0),children:"編集する"}),"fieldYu"===v&&k.isMergeStart&&k.mergeCount&&k.mergeCount>1&&(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>(e=>{if(!Q)return;let t=Q.plots.map(t=>t.id===e?{...t,isMergeStart:!1,mergeCount:void 0}:t.mergedWith===e?{...t,mergedWith:void 0}:t),a={...Q,plots:t};Z(a),"sfc"===v?(0,d.saveFarmData)(a):(0,d.saveFieldYuFarmData)(a),K(t.find(t=>t.id===e)||null)})(k.id),children:"マージ解除"})]})]})]}):(0,t.jsx)("div",{className:h.default.emptyPanel,children:(0,t.jsx)("p",{children:"区画をクリックして詳細を表示"})})})]})]}),O&&(0,t.jsx)("div",{className:h.default.modal,children:(0,t.jsxs)("div",{className:h.default.modalContent,children:[(0,t.jsxs)("div",{className:h.default.modalHeader,children:[(0,t.jsx)("h3",{children:"新しい作物を追加"}),(0,t.jsx)("button",{onClick:()=>I(!1),className:h.default.closeBtn,children:(0,t.jsx)(i.X,{size:18})})]}),(0,t.jsxs)("div",{className:h.default.modalBody,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"作物名"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:W,onChange:e=>z(e.target.value),placeholder:"例：ブロッコリー"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"表示色"}),(0,t.jsxs)("div",{className:h.default.colorPicker,children:[(0,t.jsx)("input",{type:"color",value:P,onChange:e=>$(e.target.value)}),(0,t.jsx)("span",{children:P})]})]})]}),(0,t.jsxs)("div",{className:h.default.modalFooter,children:[(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>I(!1),children:"キャンセル"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!W.trim())return;let e=[...(0,d.loadCustomCrops)(),{id:`custom_${Date.now()}`,name:W.trim(),color:P,isCustom:!0}];(0,d.saveCustomCrops)(e),M((0,d.getAllCrops)()),z(""),I(!1)},children:"追加"})]})]})})]})}e.s(["default",()=>f],37380)}]);